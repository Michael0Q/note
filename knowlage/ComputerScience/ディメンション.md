# ディメンション：データを分析するための「切り口」

## 1. ディメンションとは？

データ分析の世界における**ディメンション（Dimension）**とは、データを分析するための「**切り口**」や「**視点**」のことです。例えば、企業の売上データを分析したい場合、どのような切り口でそのデータを見たいでしょうか？

- **いつ？** → 時間ディメンション（年、月、日）
- **どこで？** → 地域ディメンション（国、都道府県、店舗）
- **何を？** → 製品ディメンション（カテゴリ、ブランド、商品名）
- **誰が？** → 顧客ディメンション（年齢層、性別、会員ランク）

このように、分析の軸となるカテゴリカルな情報をディメンションと呼びます。ディメンションは、「誰が、何を、いつ、どこで、なぜ、どのように」といったビジネスの文脈をデータに与える役割を担います。

## 2. ファクト（事実）との関係

ディメンションは、それ単体で存在するのではなく、必ず**ファクト（Fact）**とセットで使われます。

- **ファクト**: 分析したい**数値データ**そのもの。ビジネスのパフォーマンスを測る指標。
  - 例: 売上金額、販売数量、利益、在庫数など
- **ディメンション**: ファクトに意味を与える**文脈情報**。
  - 例: 上記の「時間」「地域」「製品」「顧客」など

「**2024 年に、東京の店舗で、A という商品を、20 代の男性が、100 個購入した**」というイベントがあった場合、

- ファクトは「**販売数量: 100 個**」
- ディメンションは「**時間: 2024 年**」「**地域: 東京**」「**製品: A**」「**顧客: 20 代男性**」

となります。これらが組み合わさることで、単なる数値データが意味のあるビジネス情報に変わります。

## 3. スタースキーマ：ファクトとディメンションの整理術

データウェアハウスでは、このファクトとディメンションの関係を整理するために**スタースキーマ（Star Schema）**というモデルが広く使われています。

これは、中心に**ファクトテーブル**を置き、その周りを複数の**ディメンションテーブル**が囲むような構造で、その形が星（Star）のように見えることから名付けられました。

- **ファクトテーブル**:
  - 売上金額や販売数量といった**ファクト（数値）**を格納します。
  - 各ディメンションテーブルへの外部キーを持ちます。
  - 行数が非常に多くなる傾向があります。
- **ディメンションテーブル**:
  - 時間、地域、製品などの**ディメンション（文脈情報）**の詳細な属性を格納します。
  - （例: 製品ディメンションなら、製品名、カテゴリ、ブランド、価格など）
  - ファクトテーブルに比べて行数は少ないですが、カラム（属性）が多くなる傾向があります。

```
                    +--------------------+
                    |   時間ディメンション  |
                    +--------------------+
                    | 時間ID (PK)        |
                    | 年, 四半期, 月, 日  |
                    +--------------------+
                           |
                           |
+--------------------+     |      +---------------------+
|   製品ディメンション  +-----+--+ ファクトテーブル（売上）+--+   顧客ディメンション   |
+--------------------+     |  +---------------------+  | +---------------------+
| 製品ID (PK)        |     |  | 時間ID (FK)         |  | | 顧客ID (PK)         |
| 製品名, カテゴリ    |     |  | 製品ID (FK)         |  | | 氏名, 年齢, 性別      |
+--------------------+     |  | 顧客ID (FK)         |  | +---------------------+
                           |  | 店舗ID (FK)         |  |
                           |  | 売上金額, 販売数量    |  |
                           +--+---------------------+--+
                                      |
                                      |
                            +--------------------+
                            |   店舗ディメンション  |
                            +--------------------+
                            | 店舗ID (PK)        |
                            | 店舗名, 都道府県    |
                            +--------------------+
```

この構造により、分析クエリがシンプルになり、高速なデータ集計が可能になります。

## 4. なぜディメンションが重要なのか？

ディメンションは、ビジネスインテリジェンス（BI）ツールなどでデータを多角的に分析（スライス＆ダイス）する際の基盤となります。

- **スライス**: 特定のディメンションでデータを「切り出す」こと。（例: 「製品カテゴリ」が「飲料」のデータだけを見る）
- **ダイス**: 複数のディメンションを組み合わせて、より細かくデータを分析すること。（例: 「2024 年の」「東京における」「飲料の」売上を見る）
- **ドリルダウン/アップ**: ディメンションの階層を掘り下げたり、上がったりすること。（例: 「年」→「月」→「日」へと掘り下げて分析する）

ディメンションが豊かであればあるほど、データから得られる洞察も深まります。

## 5. まとめ

- **ディメンション**は、データを分析するための「**切り口**」や「**文脈**」。
- **ファクト**（数値データ）とセットで使われ、データに意味を与える。
- **スタースキーマ**は、ファクトテーブルとディメンションテーブルを整理するための一般的なモデル。
- 豊かなディメンションは、多角的で深いデータ分析を可能にする。
